const isExpired=e=>{const t=localStorage.getItem(e);if(t){return(new Date-new Date(t))/1e3/60/60/24>7}return!0};function getAttrs(e){return e.reduce(((e,t)=>(e[t.nodeName]=t.nodeValue,e)),{})}function attrsToString(e){return Object.keys(e).map((t=>`${t}="${e[t]}"`)).join(" ")}const iconElements=document.querySelectorAll("[data-i]"),isPurgeIcons=document.querySelector("body.is-purge-icons"),ICONS_STORAGE="meteorIcons",ICONS_DATE_STORAGE="meteorIconsDate";function iconElement(e={}){iconElements.forEach((t=>{const o=t.getAttribute("data-i"),n=Array.from(t.attributes).filter((e=>"data-i"!==e.nodeName)),r=e[o]||e.circle,s=new DOMParser,c={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...getAttrs(n)};c.class?c.class=`i i-${o} ${c.class}`:c.class=`i i-sm i-${o}`;const i=`<svg ${attrsToString(c)}>${r}</svg>`,a=s.parseFromString(i,"image/svg+xml").querySelector("svg");t.parentNode.replaceChild(a,t)}))}const iconsMeteor=()=>{fetch("https://cdn.jsdelivr.net/npm/meteor-icons@3/variants/icons.json").then((e=>e.json())).then((e=>{localStorage.setItem("meteorIcons",JSON.stringify(e)),localStorage.setItem("meteorIconsDate",new Date),iconElement(e)})).catch((e=>console.error(e)))};function removeCache(){localStorage.removeItem("meteorIcons"),localStorage.removeItem("meteorIconsDate")}const initIcons=()=>{if(0===iconElements.length)return;const e=isExpired("meteorIconsDate");console.log("expired",e),isExpired("meteorIconsDate")&&removeCache(),localStorage.getItem("meteorIcons")?isPurgeIcons?(removeCache(),iconsMeteor()):iconElement(JSON.parse(localStorage.getItem("meteorIcons"))):iconsMeteor()};initIcons();
